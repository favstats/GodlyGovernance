window.powaBootLoaded=typeof window.powaBoot==="function"?true:window.powaBootLoaded||false;function loadScript(url,callback,errorback){var script=document.createElement("script");var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(script,node);script.onerror=errorback;script.onload=callback;script.type="text/javascript";script.async=true;script.src=url}function getParameterByName(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return"";return decodeURIComponent(results[2].replace(/\+/g," "))}function getEnv(){var scriptName="PoWaLoaderWapo.js";var loadingScript=document.querySelectorAll('script[src*="'+scriptName+'"]');var src=loadingScript.length&&loadingScript[0].src?loadingScript[0].src.toLowerCase():"";var path=src?src.split("//")[1].split("/").slice(1):[];var scriptIndex=path.reduce(function(memo,segment,index){return segment.indexOf(scriptName.toLowerCase())>-1?index:memo},0);return scriptIndex===0?"prod":path[scriptIndex-1]==="js"?"local":path[scriptIndex-1]}function getEnvForSection(){return"autoads"}function getBootScriptUrl(){var cloudfront="https://d1pz6dax0t5mop.cloudfront.net";var local="js";var wapoCacheToken="d5491fb";function getPowaBootUrl(env){var powaBoot="powaBoot.js?_="+wapoCacheToken;return env+"/"+powaBoot}var env=getParameterByName("ptvenv")||getEnvForSection()||getEnv();env=env.replace(/[^\w-]+/g,"");if(env==="local")return getPowaBootUrl(local);else return getPowaBootUrl(cloudfront+"/"+env)}function loadScripts(){var polyfillUrl="https://www.washingtonpost.com/pb/resources/js/polyfills.min.js";var scriptUrl=getBootScriptUrl();var needPolyfill=typeof Array.prototype.find==="undefined"||typeof window.Promise==="undefined";if(needPolyfill){loadScript(polyfillUrl,function(){console.debug("polyfill loaded",scriptUrl);loadScript(scriptUrl,function(){console.debug("powaBoot loaded",scriptUrl)},console.log)},console.log)}else{loadScript(scriptUrl,function(){console.debug("powaBoot loaded",scriptUrl)},console.log)}}if(!window.powaBootLoaded){window.powaBootLoaded=true;loadScripts()}else{console.debug("powaboot already on page");window.powaBoot&&window.powaBoot()}