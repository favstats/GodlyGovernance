(function($){function trackModalDisplay(){if(!!window.s){var props={eVar1:s.eVar1,eVar2:s.eVar2,eVar26:"apple-pay-modal"};window.sendDataToOmniture&&sendDataToOmniture("apple pay modal","event66",props)}}function localStorageAvailable(){var test="test";try{localStorage.setItem(test,test);localStorage.removeItem(test);return true}catch(e){return false}}var ApplePayModal={showOverlay:function(){if(localStorageAvailable()){var $this=this;$modal=$("#apple-signup-overlay");$modal.jqm({overlay:85,modal:true,
toTop:true,trigger:false,closeClass:"overlay-closer",onShow:function(h){h.o.prependTo("#pb-root");$("html").addClass("applepay-modal-up");h.w.show();localStorage.setItem("applepay-modal-seen",true);setTimeout(function(){trackModalDisplay()},1E3)},onHide:function(h){$("html").removeClass("applepay-modal-up");$(".pb-f-page-apple-pay-modal").addClass("applepay-modal-minimized");h.w.fadeOut("2000",function(){h.o.remove()})}});$modal.jqmShow()}},supportedDevice:function(){return location.protocol==="https:"&&
"ApplePaySession"in window},canMakePayments:function(){try{return ApplePaySession.canMakePayments()}catch(e){return false}},canMakePaymentsWithActiveCard:function(merchantID){merchantID=merchantID||"merchant.com.washingtonpost";try{return ApplePaySession.canMakePaymentsWithActiveCard(merchantID)}catch(e){return false}},init:function(){var $this=this;var modalNotSeen=localStorage.getItem("applepay-modal-seen")!=="true";var isSubscriber=/rplsb=1/.test(document.cookie);var UPCCheck=$.cookie("rplmct")==
2||$.cookie("rplmct")==4;if(modalNotSeen&&!isSubscriber&&UPCCheck&&$this.supportedDevice()&&$this.canMakePayments())$this.canMakePaymentsWithActiveCard().then(function(supported){if(supported)$this.showOverlay()});$("#apple-signup-minimized").click(function(){$(".pb-f-page-apple-pay-modal").removeClass("applepay-modal-minimized");$this.showOverlay()});wp_pb.register("breakingnews","reload",function(){if($(".pb-f-page-breaking-news-bar").height()>0)$("#apple-signup-overlay .apple-pay-contet").addClass("breaking-news-bar-open");
else $("#apple-signup-overlay .apple-pay-contet").removeClass("breaking-news-bar-open")});wp_pb.register("breakingnews","close",function(){if($(".pb-f-page-breaking-news-bar").height()>0)$("#apple-signup-overlay .apple-pay-contet").addClass("breaking-news-bar-open");else $("#apple-signup-overlay .apple-pay-contet").removeClass("breaking-news-bar-open")})}};if($("#apple-signup-overlay").length)ApplePayModal.init()})(jQuery);