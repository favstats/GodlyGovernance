(function($,TWP,undefined){var AD_LOAD_TIMER=2E3;var AD_MIN_VISIBLE=4E3;var AD_HEIGHT_LIMITED=150;var ANIM_SPEED=250;var console=new TWP.Tools.logger("leaderboard");if($(".layout_article #pb-root .pb-f-ad-leaderboard.full").length)var $leaderboard=$(".pb-f-ad-leaderboard");var applyStickiness=function(){var isLoginUser=document.cookie.match(/wapo_secure_login_id=([^;]+)/)?RegExp.$1:"";if(wp_pb.BrowserInfo&&wp_pb.BrowserInfo.tablet||isLoginUser)return;$(function(){var $html=$("html"),$feature=getFeature().find(".leaderboard"),
$window=$(window),timer,slotId="slug_leaderboard",$slotAd=$feature.find("#"+slotId),$closeBtn=$feature.find(".leaderboard-close");if(!$feature.length)return;function removeSticky(){setTimeout(function(){console.log("remove sticky leaderboard.");$feature.slideUp(ANIM_SPEED,function(){$html.removeClass("lb-persist-top-true");$feature.slideDown(ANIM_SPEED)})},AD_MIN_VISIBLE)}function applySticky(){if($window.scrollTop()>100)$html.addClass("lb-persist-top-true");else $html.removeClass("lb-persist-top-true")}
function bindEvents(){$window.on("scroll.lb-sticky",function(e){e.stopPropagation();applySticky();var bnbHeight=$(".pb-f-page-breaking-news-bar .breaking-news-bar").outerHeight();if(bnbHeight>0){$feature.addClass("pb-has-breaking-news");$feature.css("margin-top",bnbHeight+"px");wp_pb.register("breakingnews","close",function(){$feature.removeClass("pb-has-breaking-news");$feature.css("margin-top","")})}});wp_pb.register("nav","finish_open",function(){$feature.removeClass("pb-navheader-hidden")});wp_pb.register("nav",
"finish_close",function(){$feature.addClass("pb-navheader-hidden")});$closeBtn.on("click.lb-sticky",function(e){AD_MIN_VISIBLE=0;afterLoaded();if(typeof window.sendDataToOmniture==="function"){var data={pageName:window.wp_page_name,eVar1:window.wp_page_name,prop2:window.wp_subsection,eVar2:window.wp_channel,prop3:window.wp_content_type,eVar17:window.wp_content_type,eVar26:"leaderboard-close"};sendDataToOmniture("leaderboard-close","event80",data)}})}function afterLoaded(){var $featureContainer=getFeature();
if($feature.height()>$featureContainer.outerHeight())$featureContainer.height($feature.height()+30);$feature.addClass("leaderboard-ad-loaded");$window.off("scroll.lb-sticky");if($html.hasClass("lb-persist-top-true"))removeSticky()}function afterAdInserted(){timer=setTimeout(function(){console.log("from second timeout: prevent ad load fail.");afterLoaded()},6E3);if(window.googletag&&googletag.pubadsReady)googletag.pubads().addEventListener("slotRenderEnded",function(event){console.log("ad slot: "+
event.slot.getSlotElementId()+" inserted success");if(event.slot.getSlotElementId()===slotId){clearTimeout(timer);setTimeout(function(){console.log("leaderboard ad load success.");afterLoaded()},AD_LOAD_TIMER)}})}applySticky();bindEvents();setTimeout(function(){$closeBtn.addClass("fa-remove")},6E3);if($slotAd.children().length)timer=setTimeout(function(){console.log("from first timeout: if ad is already loaded");afterLoaded()},AD_LOAD_TIMER);$feature.on("DOMNodeInserted",function(e){var $el=$(e.target),
id=$el.attr("id");if($el.is("iframe")&&id&&!/(hidden)/g.test(id)){clearTimeout(timer);$feature.off("DOMNodeInserted");afterAdInserted()}});$feature.on("disableSticky.lb-sticky",function(e){clearTimeout(timer);$window.off("scroll.lb-sticky");$feature.off("DOMNodeInserted");$html.removeClass("lb-persist-top-true");TWP.Features.Ad.Leaderboard.sticky=false})})};if(!!TWP.Features.Ad.Leaderboard.sticky)applyStickiness();if(!!TWP.Features.Ad.Leaderboard.belowSharebar)applySharebarPosition();$(window.document).on("abtest-ready",
function(e,ABT){var test=ABT.get("ads-leaderboard");getFeature().attr("moat-test-id",[getFeature().attr("moat-id")||"unknown/unknown",test.name||"control"].join("-"));if(test.is("below_sharebar"))applySharebarPosition();if(test.is("sticky"))applyStickiness()});function applySharebarPosition(){var $leaderboard=getFeature();var $shareBar=getSharebar();$leaderboard.addClass("after-sharebar-leaderboard");return $leaderboard.insertAfter($shareBar)}function getFeature(){return $(".pb-f-ad-leaderboard")}
function getSharebar(){return $(".pb-f-sharebars-top-share-bar")}})(jQuery,TWP);(function($){})(jQuery);
(function($){__e=window.__e||[];try{var $d=$(document),$w=$(window),logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-article-article-topper"):window.console;var feature={remarryHeadlines:function(){var self=this;var remarryHeadlinesSelector=".pb-f-article-article-topper h1, .pb-f-article-ans-article-topper h1";try{wp_pb.StaticMethods.remarryHeadline(remarryHeadlinesSelector)}catch(e){}},initTiffanyTile:function(){logger.log("initTiffanyTile");var tiffanyTile=$("#article-topper #slug_tiffany_tile");
logger.log(tiffanyTile.is("visible"));if(tiffanyTile.length&&(tiffanyTile.is("visible")||!tiffanyTile.is(":hidden"))){$("#topper-headline-wrapper").addClass("col-sm-8").removeClass("col-sm-12");$("#topper-headline-wrapper").addClass("col-lg-9").removeClass("col-lg-12")}else $d.ready(function(){if(window.googletag&&googletag.cmd)googletag.cmd.push(function(){var slotId="tiffany_tile";googletag.pubads().addEventListener("slotRenderEnded",function(event){if(event.slot.getSlotElementId().indexOf(slotId)>
0){logger.log("initTiffanyTile rendered end");if(event.slot.j._empty_===false||$("#article-topper #slug_tiffany_tile").is("visible")||!$("#article-topper #slug_tiffany_tile").is(":hidden")){$("#topper-headline-wrapper").addClass("col-sm-8").removeClass("col-sm-12");$("#topper-headline-wrapper").addClass("col-lg-9").removeClass("col-lg-12")}}})})})},initAlignToggle:function(){var self=this;if($(".header-tool")!==undefined&&$(".header-tool").length>0)if($(".header-tool").position().left==0)$(".header-tool").css("margin-left",
"0");else $(".header-tool").css("margin-left","30px")},initLanguageDivs:function(){var self=this;var langdivs=$('span[id^\x3d"translate-text-"]').hide(),divi=0;(function cycle(){langdivs.eq(divi).fadeIn("slow").delay(3E3).fadeOut("slow",cycle);divi=++divi%langdivs.length})()},initLanguageToggle:function(){var self=this;var $toggleOption=$(".header-wp-language-button");$toggleOption.click(function(e){var $this=$(".header-lang-dropdown");if($this.hasClass("wp-language-button-clicked")){$this.removeClass("wp-language-button-clicked");
$toggleOption.removeClass("wp-language-button-clicked-wrapper");$(".header-tool").removeClass("header-tool-selected")}else{$this.addClass("wp-language-button-clicked");$toggleOption.addClass("wp-language-button-clicked-wrapper");$(".header-tool").addClass("header-tool-selected")}});$d.click(function(e){var target=e.target;if(!$(target).is(".header-wp-language-button")&&!$(target).parents().is(".header-wp-language-button")){$(".header-lang-dropdown").removeClass("wp-language-button-clicked");$(".header-wp-language-button").removeClass("wp-language-button-clicked-wrapper");
$(".header-tool").removeClass("header-tool-selected")}})},initFollow:function(){var self=this;var userId=document.cookie.match(/wapo_login_id=([^;]+)/)?RegExp.$1:"",userSecureId=document.cookie.match(/wapo_secure_login_id=([^;]+)/)?RegExp.$1:"",userAgent=navigator.userAgent;var follow={init:function(){var userSignedIn=userId!==""?true:false,userApiUrl="",jsonData={},getUserData=true,followed=[];$("#subtitle-follow").removeClass("hide");if(userSignedIn){userApiUrl="https://follow.washingtonpost.com/Follow/api/user";
jsonData={washPostId:userId,wapoLoginID:userId,wapoSecureID:userSecureId,userAgent:userAgent}}else if(follow.localStorageAvailable()&&localStorage.getItem("wp_follow_modal_email")){userApiUrl="https://follow.washingtonpost.com/Follow/api/anonymous-user";jsonData={emailId:localStorage.getItem("wp_follow_modal_email")}}else getUserData=false;if(getUserData)$.ajax({type:"POST",url:userApiUrl,contentType:"application/json",dataType:"json",data:JSON.stringify(jsonData),success:function(data){if(follow.localStorageAvailable()&&
data.emailId)localStorage.setItem("wp_follow_modal_email",data.emailId);if(data.tags)for(var i=0,len=data.tags.length;i<len;i++)if(data.tags[i].type==="category")followed.push(data.tags[i].slug);if(followed.indexOf($("#subtitle-follow").data("categorySlug"))>=0){$("#subtitle-follow").addClass("following");$("#subtitle-follow .followLbl").text("Following")}}});$("#subtitle-follow").on("click",function(){var $this=$(this);var endpoint=$this.hasClass("following")?"unfollow":"follow",categorySlug=$this.data("categorySlug"),
categoryTitle=$this.data("categoryTitle"),position={};position.top=35;position.left=485;function applyCallBack(data){if(endpoint==="follow")$this.addClass("following").find(".followLbl").text("Following");else $this.removeClass("following").find(".followLbl").text("Follow");if(endpoint==="follow")s.sendDataToOmniture("Follow","event103",{eVar1:s.eVar1,eVar2:s.eVar2,eVar26:"fl_top_topic_"+categorySlug.replace(/-/g,"")});else s.sendDataToOmniture("Unfollow","event104",{eVar1:s.eVar1,eVar2:s.eVar2,eVar26:"fl_top_topic_"+
categorySlug.replace(/-/g,"")})}var data={categorySlug:categorySlug,categoryTitle:categoryTitle,signedIn:userSignedIn,endpoint:endpoint,callBack:applyCallBack};if(endpoint==="follow"){data.position=position;if(follow.localStorageAvailable()&&(localStorage.getItem("wp_follow_modal_seen")!=="true"||!localStorage.getItem("wp_follow_modal_email"))){var tagData={"tag":{"slug":categorySlug,"type":"category"}};$.ajax({type:"POST",url:"https://follow.washingtonpost.com/Follow/api/tag",contentType:"application/json",
dataType:"json",data:JSON.stringify(tagData),success:function(result){data.categoryDesc=result.tag.description;follow.displayPip(data)},error:function(reason){follow.displayPip(data)}})}else{data.email=follow.localStorageAvailable()?localStorage.getItem("wp_follow_modal_email"):"";follow.followApi(data)}}else follow.unfollowApi(data);return false});if(typeof Hammer==="function"&&wp_pb.BrowserInfo.mobile_browser)try{var hammertime=new Hammer($("#subtitle-follow")[0],{prevent_mouseevents:true});hammertime.on("tap",
handleTap)}catch(err){}function handleTap(ev){ev.gesture.preventDefault();ev.gesture.stopPropagation();$(ev.gesture.target).click();$(ev.gesture.target).blur()}},displayPip:function(data){var modal=$(".subTitle-follow-modal");if(data.signedIn===false){modal.find(".not-signed-In.before").removeClass("hide");modal.find(".not-signed-In.after").addClass("hide");modal.find(".signed-In").addClass("hide");if(follow.localStorageAvailable()&&localStorage.getItem("wp_follow_modal_email"))modal.find("#follow-modal-input").val(localStorage.getItem("wp_follow_modal_email"))}else{modal.find(".not-signed-In").addClass("hide");
modal.find(".signed-In").removeClass("hide");data.position.top+=20}modal.find(".category-desc").text(data.categoryDesc?data.categoryDesc:"");modal.css("top",data.position.top);modal.css("left",data.position.left);modal.jqm({overlayClass:"article-topper-follow-modal",overlay:0,onHide:function(hash){modal.find(".sign-up").off("click");modal.find(".follow-modal-close").off("click");modal.find(".got-it").off("click");hash.w.hide()&&hash.o&&hash.o.remove();return true}});modal.find(".sign-up").click(function(){var email=
modal.find("#follow-modal-input").val();var re=/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/igm;if(email==""||!re.test(email))$(".invalid-email").show();else{$(".invalid-email").hide();data.email=email;if(follow.localStorageAvailable())localStorage.setItem("wp_follow_modal_email",email);follow.followApi(data,function(){modal.find(".not-signed-In.before").addClass("hide");modal.find(".not-signed-In.after").removeClass("hide")})}});modal.find(".follow-modal-close").click(function(){modal.jqmHide()});modal.find(".got-it").click(function(){modal.jqmHide()});
if(data.signedIn)follow.followApi(data,function(){if(follow.localStorageAvailable()&&localStorage.getItem("wp_follow_modal_seen")!=="true"){modal.jqmShow();localStorage.setItem("wp_follow_modal_seen","true")}else modal.jqmShow()});else if(follow.localStorageAvailable()&&(localStorage.getItem("wp_follow_modal_seen")!=="true"||!localStorage.getItem("wp_follow_modal_email"))){modal.jqmShow();s.sendDataToOmniture("Follow","event101",{eVar1:s.eVar1,eVar2:s.eVar2,eVar26:"fl_top_topic_"+data.categorySlug.replace(/-/g,
"")});localStorage.setItem("wp_follow_modal_seen","true")}else{if(follow.localStorageAvailable())data.email=localStorage.getItem("wp_follow_modal_email");follow.followApi(data)}},followApi:function(data,callBack){var serviceBase="https://follow.washingtonpost.com",jsonData={washPostId:userId,tags:[]};if(data.email&&data.signedIn==false){serviceBase+="/Follow/api/anonymous-follow";jsonData.emailId=data.email;jsonData.tags=[{slug:data.categorySlug,type:"category"}]}else{serviceBase+="/Follow/api/follow";
jsonData.tags=[{slug:data.categorySlug,title:data.categoryTitle,level:1,type:"category"}]}$.ajax({type:"POST",url:serviceBase,contentType:"application/json",dataType:"json",data:JSON.stringify(jsonData),success:function(result){if(result.status==true){data.callBack(data);if(callBack)callBack()}}})},unfollowApi:function(data){var serviceBase="https://follow.washingtonpost.com";var tags=[{slug:data.categorySlug,title:data.categoryTitle,level:1,type:"category"}];var jsonData={washPostId:userId,wapoLoginID:userId,
wapoSecureID:userSecureId,userAgent:userAgent,tags:tags};if(data.signedIn)serviceBase+="/Follow/api/unfollow";else{serviceBase+="/Follow/api/anonymous-unfollow";jsonData.emailId=localStorage.getItem("wp_follow_modal_email")}$.ajax({type:"POST",url:serviceBase,contentType:"application/json",dataType:"json",data:JSON.stringify(jsonData),success:function(responce){if(responce.status==true&&data.callBack)data.callBack(responce)}})},localStorageAvailable:function(){var test="test";try{localStorage.setItem(test,
test);localStorage.removeItem(test);return true}catch(e){return false}}};$w.on("abtest-ready",function(e,ABT){var test=ABT.get("follow-powerPostTop");if(test.is("sharebar"))return;else follow.init()})},initStoryLabelModal:function(){var modal=$(".story-label-explainer");if(modal.find(".label-title").hasClass("Perspective"))modal.find(".label-content").text("Discussion of news topics with a point of view, including narratives by individuals regarding their own experiences");else if(modal.find(".label-title").hasClass("Analysis"))modal.find(".label-content").text("Interpretation of the news based on evidence, including data, as well as anticipating how events might unfold based on past events");
else if(modal.find(".label-title").hasClass("Opinion"))modal.find(".label-content").text("A column or article in the Opinions section (in print, this is known as the Editorial Pages).");else if(modal.find(".label-title").hasClass("Review"))modal.find(".label-content").text("A professional critic\u2019s assessment of a service, product, performance, or artistic or literary work");modal.jqm({overlayClass:"story-label-explainer",overlay:0,onHide:function(hash){hash.w.hide()&&hash.o&&hash.o.remove();
return true}});modal.find(".label-modal-close").click(function(){modal.jqmHide()});$(".section-label-span").hover(function(){modal.jqmShow()});$(document).mouseup(function(e){var container=$(".story-label-explainer");if(!container.is(e.target)&&container.has(e.target).length===0)modal.jqmHide()});if(typeof Hammer==="function"&&wp_pb.BrowserInfo.mobile_browser)try{var hammertime=new Hammer($(".section-label-span")[0],{prevent_mouseevents:true});hammertime.on("tap",handleTap)}catch(err){}function handleTap(ev){ev.gesture.preventDefault();
ev.gesture.stopPropagation();modal.jqmShow()}},initEssentials:function(){var self=this;var tablet=isMobile.tablet();window.VisitorSegment&&VisitorSegment("tablet",function(){return tablet&&$(window).width()>768});window._essentials_onrender=function(Essentials){var $target=$("#essentials-topper"),name=Essentials.name,data=Essentials.data,pdata=Essentials.getPersistentData(),status=pdata[Essentials.contentPath],count=!!name&&!!data?data.results.length:undefined,tcount;if(!!Essentials.name&&$(".cf-essentials-module").length!=
0){$target.show();$(function(){if(count){switch(count){case 1:tcount="One";break;case 2:tcount="Two";break;case 3:tcount="Three";break;case 4:tcount="Four";break;case 5:tcount="Five";break;default:tcount="";break}$(('\x3ch2\x3e\x3cspan class\x3d"status vg-check status-icon status-%s"\x3e\x3c/span\x3e '+'\x3cspan class\x3d"status-count"\x3e'+tcount+" Essentials\x3c/span\x3e "+'\x3cspan class\x3d"status-kicker"\x3e%k\x3c/span\x3e'+"\x3c/h2\x3e").replace("%s","undefined"==typeof status?"scroll":"read").replace("%k",
data.kicker.text)).appendTo($target);$target.on("click.essentials-topper",function(e){wp_pb.report("essentials-topper","click",{$target:$target});wp_pb.report("essentials","scrollto",{$from:$target})})}})}}},init:function(){var self=this;this.initTiffanyTile();this.initAlignToggle();this.initLanguageDivs();this.initLanguageToggle();this.initStoryLabelModal();this.initEssentials()}};if(wp_pb.StaticMethods.isPageHydrated())feature.init();__e.push(["shamble",function(){feature.init()}]);$w.on("resize",
wp_pb.StaticMethods.debounce(function(ev){feature.initAlignToggle()},25))}catch(err){}})(jQuery);(function($){})(jQuery);
(function($){__e=window.__e||[];_dw=window._dw||[];var $article,$d=$(document),$w=$(window),$b=$("body"),isDesktop=wp_pb.BrowserInfo.desktop,isMobile=!isDesktop,logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-article-article-body"):window.console;window.cr_on=false;var feature={initKicker:function(){var self=this;if(!!$(".layout_article #pb-root .pb-f-article-article-topper .headline-kicker, .layout_article #pb-root .pb-f-article-ans-article-topper .headline-kicker").length){var $kicker=$(".pb-f-article-article-topper .headline-kicker, .pb-f-article-ans-article-topper .headline-kicker").clone();
$(".layout_article #pb-root .pb-f-article-article-body .pb-timestamp, .layout_article #pb-root .pb-f-article-ans-article-body .pb-timestamp").before($kicker)}},initLoadTime:function(){$article=$("#article-body");var sel=".pb-loadtime .loadtime."+(isDesktop?"active-on-desktop":"active-on-mobile");$(sel,$article).each(function(i){var $this=$(this),$parent=$this.parent(),threshold=(!isNaN($this.attr("data-threshold"))?$this.attr("data-threshold"):2)*1E3;if(!!window.history&&!!history.state.loadTime){$this.html(Math.round(history.state.loadTime/
10)/100);if(history.state.loadTime<threshold)$parent.show();else $parent.hide()}})},initIframes:function(){var self=this;$("iframe[data-src]",$article).each(function(i){var $this=$(this);$this.attr("src",$this.attr("data-src"))})},initAboutTheAuthors:function(){var self=this;$("#about-the-authors").click(function(e){var $this=$(this);var $container=$this.closest(".multi-author-bio");if(!!$container){if($container.hasClass("open"))$container.removeClass("open").addClass("closed");else $container.removeClass("closed").addClass("open");
wp_pb.report("global","domChanged")}})},initTables:function(){var self=this;var $tables=$("div.extra table",$article);$tables.each(function(){var $table=$(this),$bars=$(".barchart",$table),longestBar=0;$bars.each(function(i){var $bar=$(this),w=$bar.attr("width");if(!isNaN(w)){w=w*1;longestBar=w>longestBar?w:longestBar}});$bars.each(function(i){var $bar=$(this),w=$bar.attr("width");if(!isNaN(w)){w=w*1;var scale=$article.width()>480?.85:.75;relativeWidth=scale*(Math.ceil(100*(w/longestBar)*100)/100);
$bar.css("width",relativeWidth+"%")}})})},initGalleries:function(){var self=this;$(".pb-f-gallery-gallery, .pb-f-gallery-gallery-ans",$article).each(function(i){var $gallery=$(this).children("div:first"),$gtitle=$gallery.attr("data-title"),$permalink=$gallery.attr("data-permalink"),$gurl=$permalink.indexOf("js.")>-1?$permalink.replace("js.","www."):$permalink,$guuid=$gallery.attr("data-uuid"),$genctitle=encodeURI($gtitle),$gencurl=encodeURI($gurl),$gmain=$gallery.find(".wp-volt-gal-main"),$gheadline=
$gallery.find(".wp-volt-gal-embed-promo-top"),$gpromotop=$gallery.find(".wp-volt-gal-embed-promo-top span.cell");if($gtitle&&$gurl){$gheadline.html('\x3ch3 class\x3d"promo-top-title"\x3e'+$gpromotop.html()+"\x3c/h3\x3e");var gshare='\x3cspan class\x3d"wp-article-sharing"\x3e\x3cspan class\x3d"wp-tooltip-button wp-article-embed"\x3e\x3cspan class\x3d"title"\x3eEmbed\x3c/span\x3e\x3ci class\x3d"fa fa-code icon-code"\x3e\x3c/i\x3e\x3cspan class\x3d"wp-tooltip"\x3e\x3cspan class\x3d"wp-sharing-copy"\x3e\x3cspan class\x3d"wp-sharing-copy-input-wrap"\x3e\x3cinput type\x3d"text" class\x3d"wp-sharing-copy-input" value\x3d"\x3ciframe width\x3d\'480\' height\x3d\'700\' scrolling\x3d\'no\' src\x3d\''+
$gurl+'?_template\x3dgallery-embed\' frameborder\x3d\'0\' webkitallowfullscreen mozallowfullscreen allowfullscreen\x3e\x3c/iframe\x3e"\x3e\x3c/span\x3e\x3cspan class\x3d"wp-sharing-copy-button"\x3eCopy\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"wp-tooltip-button wp-article-social"\x3e\x3cspan class\x3d"title"\x3eShare\x3c/span\x3e\x3ci class\x3d"fa fa-share icon-share-alt"\x3e\x3c/i\x3e\x3cspan class\x3d"wp-tooltip"\x3e\x3ci class\x3d"wp-sharing-button fa fa-facebook icon-facebook"\x3e\x3c/i\x3e\x3ci class\x3d"wp-sharing-button fa fa-twitter icon-twitter"\x3e\x3c/i\x3e\x3ci class\x3d"wp-sharing-button fa fa-google-plus icon-google-plus"\x3e\x3c/i\x3e\x3ca class\x3d"wp-sharing-button-email" href\x3d"mailto:?subject\x3d'+
$genctitle+" from The Washington Post\x26body\x3d"+$gencurl+'%3Ftid\x3dss_mail"\x3e\x3ci class\x3d"fa fa-envelope"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e';$(gshare).insertAfter($gmain);var $facebook=$gallery.find(".fa-facebook");$facebook.click(function(){var shareWindow=window.open("https://www.facebook.com/sharer/sharer.php?u\x3d"+$gencurl+"%3Ftid\x3dss_fb","share_facebook","width\x3d658,height\x3d354,scrollbars\x3dno");return false});var $twitter=$gallery.find(".fa-twitter");
$twitter.click(function(){var shareWindow=window.open("https://twitter.com/share?url\x3d"+$gencurl+"%3Ftid\x3dss_tw\x26text\x3d"+$genctitle,"share_twitter","width\x3d550,height\x3d350,scrollbars\x3dno");return false});var $google=$gallery.find(".fa-google-plus");$google.click(function(){var shareWindow=window.open("https://plus.google.com/share?url\x3d"+$gencurl+"%3Ftid\x3dss_gp","share_google-plus","width\x3d832,height\x3d472,scrollbars\x3dno");return false});var $copybtn=$gallery.find(".wp-sharing-copy-button");
$copybtn.click(function(event){event.stopPropagation();$(event.currentTarget).parent().find(".wp-sharing-copy-input").select();try{document.execCommand("copy")}catch(err){}})}})},initTooltips:function(){var self=this;var $toggleOption=$(".wp-tooltip-button");$toggleOption.click(function(e){var $this=$(this);if($(e.target).is("span")||$(e.target).is("i.wp-sharing-button")||$(e.target).is("i.icon-envelope")||$(e.target).is("input")){e.preventDefault();return}else if($(this).hasClass("wp-tooltip-button-clicked"))$this.removeClass("wp-tooltip-button-clicked");
else{$toggleOption.filter(".wp-tooltip-button-clicked").removeClass("wp-tooltip-button-clicked");$this.addClass("wp-tooltip-button-clicked")}})},initHeadline:function(){var self=this;try{wp_pb.StaticMethods.remarryHeadline($(".pb-byline-tool-mobile"))}catch(e){}},initReadMore:function(){var referringDomain=document.referrer.split("/")[2]||"";var referringDomain=referringDomain.split(":")[0]||"";if(referringDomain!==location.hostname){var rmButton=$("\x3cbutton id\x3d'resumeReading'\x3eRead More\x3c/button\x3e").on("click",
readMore);$("#article-body article").addClass("blockReading").after(rmButton)}function readMore(e){e.preventDefault();$(this).siblings(".blockReading").removeClass("blockReading").end().remove()}},initResizableIframes:function(){var self=this;var hasResizableIframe=false;$("iframe[width][height]",$article).each(function(i){var $iframe=$(this),w=$iframe.attr("width"),h=$iframe.attr("height");if(!isNaN(w)&&!isNaN(h)){$iframe.attr("data-aspect-ratio",w/h);if($iframe.attr("width")!=$article.width()){var hFudgeFactor=
!!$iframe.attr("src")&&$iframe.attr("src").match(/instagram.com/)?40:0;$iframe.attr("width",Math.round($article.width()));$iframe.attr("height",Math.round($article.width()/$iframe.attr("data-aspect-ratio"))+hFudgeFactor)}if(!hasResizableIframe){hasResizableIframe=true;$w.resize(function(ev){$("iframe[data-aspect-ratio]",$article).each(function(i){var $ifr=$(this);hFF=!!$iframe.attr("src")&&$iframe.attr("src").match(/instagram.com/)?40:0;$ifr.attr("width",Math.round($article.width()));$ifr.attr("height",
Math.round($article.width()/$ifr.attr("data-aspect-ratio"))+hFF)})})}}})},initAudio:function(){var self=this;$("audio").each(function(){if(!!$(this).find("source")[0]){var audioSrc=$(this).find("source")[0].src;var audioId=$(this)[0].id;$(this).replaceWith('\x3cdiv class\x3d"audio-wrapper" id\x3d"'+audioId+'"\x3e\x3caudio preload\x3d"none"\x3e\x3csource src\x3d"'+audioSrc+'" type\x3d"audio/mp3" /\x3e\x3ca href\x3d"'+audioSrc+'"\x3e'+audioSrc+'\x3c/a\x3e\x3c/audio\x3e\x3cdiv class\x3d"audio-player"\x3e\x3cdiv class\x3d"play-button play"\x3e\x3c/div\x3e\x3cdiv class\x3d"progress-bar"\x3e\x3cdiv class\x3d"elapsed-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"playhead"\x3e\x3c/div\x3e\x3cdiv class\x3d"time"\x3e \x3cspan class\x3d"elapsed-time"\x3e00:00\x3c/span\x3e / \x3cspan class\x3d"total-time"\x3e00:00\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')}});
$(".audio-wrapper").each(function(){var $this=$(this),$audio=$this.find("audio"),audio=$audio[0],$audioPlayer=$this.find(".audio-player"),$playButton=$audioPlayer.find(".play-button"),$progressBar=$audioPlayer.find(".progress-bar"),$elapsedBar=$audioPlayer.find(".elapsed-bar"),$playhead=$audioPlayer.find(".playhead"),$time=$progressBar.find(".time"),$elapsedTime=$time.find(".elapsed-time"),$totalTime=$time.find(".total-time");var duration;$audio.on("loadedmetadata",function(){duration=audio.duration;
$totalTime.text(formatDuration(duration))});$audio.trigger("load");var playheadWidth=$playhead.outerWidth(),progressBarWidth=$progressBar.outerWidth(),progressBarLeft=$progressBar.offset().left,firstPlayed=false,dragging=false,draggingWhilePaused=false;$playButton.click(function(){if(audio.paused){audio.play();$(this).removeClass("play").addClass("pause");if(firstPlayed===false){firstPlayed=true;$playhead.show()}}else{audio.pause();$(this).removeClass("pause").addClass("play")}});$audio.on("timeupdate",
audioUpdate);$w.on("resize",function(){progressBarWidth=$progressBar.outerWidth();progressBarLeft=$progressBar.offset().left;audioUpdate()});$progressBar.on("mousedown",function(e){if(e.which==1&&firstPlayed===true){e.preventDefault();dragging=true;if(audio.paused)draggingWhilePaused=true;else audio.pause();$w.on("mousemove",drag);$audio.off("timeupdate",audioUpdate)}});$w.on("mouseup",function(e){if(dragging===true){drag(e);$w.off("mousemove",drag);audio.currentTime=duration*((e.pageX-progressBarLeft)/
progressBarWidth);if(audio.currentTime>=duration){audio.pause();$playButton.removeClass("pause").addClass("play")}else if(!draggingWhilePaused)audio.play();$audio.on("timeupdate",audioUpdate)}dragging=false;draggingWhilePaused=false});function drag(e){var newLeft=e.pageX-progressBarLeft;if(newLeft>=0&&newLeft<=progressBarWidth){$playhead.css("left",newLeft-playheadWidth/2+"px");$elapsedBar.css("width",newLeft+"px")}if(newLeft<0){$playhead.css("left",-(playheadWidth/2)+"px");$elapsedBar.css("width",
"0px")}if(newLeft>progressBarWidth){$playhead.css("left",progressBarWidth-playheadWidth/2+"px");$elapsedBar.css("width",progressBarWidth+"px")}}function audioUpdate(){var elapsedBarWidth=progressBarWidth*(audio.currentTime/duration);$playhead.css("left",elapsedBarWidth-playheadWidth/2+"px");$elapsedBar.css("width",elapsedBarWidth+"px");if(audio.currentTime>=duration)$playButton.removeClass("pause").addClass("play");$elapsedTime.text(formatDuration(audio.currentTime))}function formatDuration(duration){sec=
Math.floor(duration);min=Math.floor(sec/60);min=min>=10?min:"0"+min;sec=Math.floor(sec%60);sec=sec>=10?sec:"0"+sec;return min+":"+sec}})},initVideo:function(){var self=this;$article.find(".inline-video").each(function(){var $this=$(this);var $wpvPlayer=$this.find(".wpv-player");if($wpvPlayer.attr("data-show-caption")!=="1")$this.find(".inline-video-caption").show();else;})},initInlineLinks:function(){var self=this;var inlineLinkConfig={ctx:"#article-body article",selector:'p a[href*\x3d"www\\.washingtonpost\\.com"]',
param:"tid",getParamValue:function($link,ev){return this.param+"\x3da_inl"}};var inlineBioConfig={ctx:"#article-body article",selector:'.inline-content.author-bio a[href*\x3d"www\\.washingtonpost\\.com"]',param:"tid",getParamValue:function($link,ev){return this.param+"\x3da_bio"}};try{wp_pb.StaticMethods.parametrizeLinks.init([inlineLinkConfig,inlineBioConfig])}catch(e){}},initABTests:function(){_dw.push(["global","ready",function(api){api.get("upgrade-toolkit_v110")}])},initAuthorBioBox:function(){var self=
this;var authorBioBoxHandler={init:function(){try{if(mobile_browser||$(window).width()<975)$(".pb-f-article-article-body .pb-author-wrapper, .pb-f-article-ans-article-body .pb-author-wrapper").each(function(){var $this=$(this);if($this.find(".pb-author-modal-wrapper").length>0){$this.addClass("handle-as-mobile");var $modal=$this.find(".pb-author-modal-wrapper .slide-layer"),$otherModal=$this.siblings().find(".pb-author-modal-wrapper .slide-layer"),$modalWrapper=$this.find(".pb-author-modal-wrapper"),
$closeBtn=$this.find(".pb-author-modal-wrapper .close-btn");var modalFadeIn=function(ev){if($modal.is(":hidden")){modalFadeOut();ev.preventDefault();ev.stopPropagation();$modal.find(".pb-author-modal").css("width",window.innerWidth*.75+"px");$modalWrapper.css("margin-left","-"+$modal.outerWidth()/2+"px");$modal.show(200);$("body").on("click",modalFadeOut)}else if(ev.target.nodeName!="A"&&ev.target.nodeName!="IMG"){ev.preventDefault();ev.stopPropagation()}};var modalFadeOut=function(){$otherModal.hide(200);
$modal.hide(200);$("body").off("click",modalFadeOut)};$this.on("click",modalFadeIn);$closeBtn.on("click",modalFadeOut)}});else{$(".pb-f-article-article-body, .pb-f-article-ans-article-body").prepend('\x3cdiv id\x3d"pb-article-body-author-modals"\x3e\x3c/div\x3e');$(".pb-f-article-article-body .pb-author-wrapper, .pb-f-article-ans-article-body .pb-author-wrapper").each(function(){var $this=$(this);if($this.find(".pb-author-modal-wrapper").length>0){var $modal=$this.find(".pb-author-modal-wrapper .slide-layer"),
transitionTimer,thisTop;$modal.appendTo($this.closest(".article-body").siblings("#pb-article-body-author-modals"));$this.add($modal).hover(function(ev){if(thisTop!=$this.closest(".pb-sig-line").position().top){var top=0,left=0;if($(".pb-f-article-article-body .headshot-to-the-left, .pb-f-article-ans-article-body .headshot-to-the-left").length>0){top=parseFloat($(".article-body").css("margin-top"))+$this.height()+$this.position().top+5;left=$this.position().left+20}else{top=parseFloat($(".article-body").css("margin-top"))+
$this.position().top+$this.height()+5;left=$this.position().left+20}$modal.css({top:top+"px",left:left+"px"});thisTop=$this.closest(".pb-sig-line").position().top}if(transitionTimer){clearTimeout(transitionTimer);transitionTimer=null}transitionTimer=setTimeout(function(){$modal.show(200)},100)},function(ev){if(transitionTimer){clearTimeout(transitionTimer);transitionTimer=null}var targetElement=ev.toElement;if(targetElement===undefined)targetElement=ev.relatedTarget;if($modal.has(targetElement).length===
0&&$this.has(targetElement).length===0)$modal.hide(200)})}})}}catch(err){}}};authorBioBoxHandler.init()},initFactChecker:function(){if(!!window.wp_meta_data&&!!wp_meta_data.page_id&&!!wp_meta_data.page_id.length&&wp_meta_data.page_id[0].match(/^fact-checker\d+$/))if(!!window.wp_import)wp_import(["//dhpikd1t89arn.cloudfront.net/js/include/sharethefacts-v1.js"],function(ShareTheFacts){if(!!window.sharethefacts_embed)try{window.sharethefacts_scanned=false;sharethefacts_embed()}catch(e){}})},init:function(){var self=
this;$article=$("#article-body");this.initKicker();this.initIframes();this.initAboutTheAuthors();this.initTables();this.initGalleries();this.initTooltips();this.initHeadline();this.initResizableIframes();this.initAudio();this.initVideo();this.initABTests();this.initInlineLinks();this.initAuthorBioBox();this.initFactChecker()}};if(wp_pb.StaticMethods.isPageHydrated())feature.init();__e.push(["shamble",function(){feature.init()}]);$d.on("loadTimeUpdated",function(ev){feature.initLoadTime()})})(jQuery);
(function($){var logger=window.TWP&&TWP.Tools&&TWP.Tools.logger?new TWP.Tools.logger("feature-loader"):window.console;function makeLoadFeatureFunc(baseConfig,baseOptions){baseConfig=baseConfig||{};baseOptions=baseOptions||{};return function(config,options){var conf=$.extend(baseConfig,config);var thisoptions=$.extend(baseOptions,options);wp_pb.StaticMethods.loadFeature(conf,thisoptions)}}var loaderInstances=$(".pb-f-tools-feature-loader");loaderInstances.each(function(i,el){var $el=$(el);var $config=
$(".feature-loader-config",$el);var id=$el.attr("id");if(!$config.length||!id)return;var contentUri=$config.data("contenturi");var loadFeature=makeLoadFeatureFunc({el:id},contentUri?{contentUri:contentUri}:null);var actionFuncs={loadFeature:loadFeature};var conditionsURL=$config.data("conditionsurl");if(conditionsURL){$.get(conditionsURL).then(handler).then(null,function(e){logger.error(e)});return}if($config.is("script")){var conditions;try{conditions=JSON.parse($config.html())}catch(e){logger.error(e);
return}if(conditions){handler(conditions);return}}function handler(configs){ConditionManager.makeFromConfig({configs:configs,conditionFuncs:wp_pb.conditions,actionFuncs:actionFuncs})}})})(window.jQuery);
(function($,TWP){var logger=new TWP.Tools.logger("flex");var applyStickiness=function(){var $window=$(window),$ad=$(".pb-f-ad-flex"),$ad_div=$($ad.children()[0]),slotId="slug_flex_ss_bb_hp",adSize=0,inRightRail=false,$right_rail=$("#right-rail"),min_viewport=990;$ad.on("DOMNodeInserted",function(e){var $el=$(e.target),id=$el.attr("id");if($el.is("iframe")&&id&&!/(hidden)/g.test(id)){$ad.off("DOMNodeInserted");$ad.addClass("sticky");afterAdInserted($el)}});var bindScrollDown=function(){var scrollTop,
stopTop=$ad.offset().top+$ad.height()-$ad_div.outerHeight()-50;var getTopPoint=function(){return $ad.offset().top-50};var getMarginLeft=function(){var left=($ad.outerWidth()-adSize)/2;return left<0?0:left};var getRailMarginLeft=function(){if(inRightRail){var railLeft=($right_rail.width()-$ad_div.width())/2;return railLeft<0?0:railLeft}else return getMarginLeft()};var getAdLeft=function(){return $ad.offset().left};var applySticky=function(top){var left=0;if(inRightRail&&top<stopTop){left=$right_rail.offset().left;
$ad_div.css({top:50,left:left,position:"fixed",width:$right_rail.width()})}else if(top<stopTop){left=getAdLeft()+getMarginLeft();$ad_div.css({top:50,left:left,position:"fixed"})}else{var bTop=$ad.height()-$ad_div.height();left=getRailMarginLeft();$ad_div.css({top:bTop,left:left,position:"absolute"})}};var removeSticky=function(){if($ad.hasClass("sticky")){$ad.removeClass("sticky");$ad_div.attr("style","");$window.off("scroll.flexAd-sticky")}};$window.off("scroll.flexAd-sticky").on("scroll.flexAd-sticky",
function(){scrollTop=$window.scrollTop();if(scrollTop>getTopPoint())applySticky(scrollTop);else if($ad.hasClass("sticky"))$ad_div.css({top:0,position:"static",left:getRailMarginLeft()})});$window.off("resize.flexAd-sticky").on("resize.flexAd-sticky",function(){if($(window).outerWidth()>min_viewport)if($ad.hasClass("sticky")){var left=0;if($ad_div.css("position")==="fixed")left=getAdLeft()+getMarginLeft();else left=getRailMarginLeft();$ad_div.css({left:left})}else{$ad.addClass("sticky");startSticky()}else removeSticky()});
$ad.on("flexAd.remove_sticky",function(){$window.off("resize.flexAd-sticky");removeSticky()})};function startSticky(){if($(window).outerWidth()>min_viewport)bindScrollDown();else $window.on("resize.flexAd-invisible",function(){if($ad.is(":visible"))bindScrollDown();else $ad.trigger("flexAd.remove_sticky")})}var afterAdInserted=function(){if(window.googletag&&googletag.pubadsReady)googletag.pubads().addEventListener("slotRenderEnded",function(event){if(event.slot.getSlotElementId()===slotId){adSize=
event.size[0];inRightRail=$ad.parent("#right-rail").length>0;logger.log("Flex unit rendered");if(event.size[1]<1050)startSticky()}})}};if(TWP&&TWP.Features&&TWP.Features.Ad&&TWP.Features.Ad.flexAd&&TWP.Features.Ad.flexAd.sticky)applyStickiness()})(jQuery,TWP);
(function($){window.__e=window.__e||[];window._dw=window._dw||[];var feature={initABTest:function(){var self=this;window._dw.push(["global","ready",function(api){var variant=api.get("article-mostReadOpinion"),DEBUG=false;if(DEBUG||variant.is("replaceTwo")||variant.is("addTwo")){var x=2,normalSel="li.pm-content",addlSel="li.pm-addl-content";document.querySelectorAll(".pb-f-page-post-most ul.skin").forEach(function(ulInDom){if(ulInDom.querySelector(addlSel)){var source=ulInDom.cloneNode(true),target=
document.createElement("ul");if(!DEBUG&&variant.is("replaceTwo"))self.helpers._removeX(source,normalSel,x);else if(!DEBUG&&variant.is("addTwo"));else if(DEBUG);self.helpers._dedup(source);self.helpers._addX(source,target,normalSel);self.helpers._addX(source,target,addlSel,x);self.helpers._cleanLastClass(target);self.helpers._cleanDisplayNumbers(target);self.helpers._updateTids(target);ulInDom.innerHTML=target.innerHTML}})}}])},helpers:{_removeX:function(source,sel,x){var els=source.querySelectorAll(sel),
l=els.length;x=x===undefined?l:isNaN(x)||x<0?0:x>l?l:x;for(var i=0;i<x;i++){var child=source.children[l-x];if($(child).is(sel))source.removeChild(child)}},_addX:function(source,target,sel,x){var els=source.querySelectorAll(sel),l=els.length;x=x===undefined?l:isNaN(x)||x<0?0:x>l?l:x;els.forEach(function(el,i){if(i<x){$(el).removeClass("hide");target.append(el)}})},_cleanLastClass:function(el){var children=el.children,l=children.length;for(var i=0;i<l;i++)if(i==l-1)$(children[i]).addClass("last");else $(children[i]).removeClass("last")},
_cleanDisplayNumbers:function(el){var children=[],sel="#select-nothing-yKQcvflTRB";if(el.querySelector(".pm-addl-content .totalShown")){children=el.children;sel=".totalShown"}else if(el.querySelector(".pm-addl-content .thisTotalShown")){children=el.querySelectorAll(".pm-addl-content .thisTotalShown");sel=".thisTotalShown"}var l=children.length;for(var i=0;i<l;i++){var child=children[i];if($(child).is(".pm-addl-content"))try{child.querySelector(sel).innerHTML=i+1}catch(e){}}},_updateTids:function(el){var re=
/((\?|&)tid=[^&]+)/;el.querySelectorAll("a").forEach(function(a){if(a.href.match(re))a.href=a.href.replace(re,RegExp.$1+"_test")})},_dedup:function(target){var hrefs={},ul=document.createElement("ul");Array.prototype.filter.call(target.querySelectorAll("li"),function(li){var href=li.querySelector("a[href]").getAttribute("href").split("?")[0];if(href in hrefs)return false;else{hrefs[href]=true;return true}}).forEach(function(li){ul.append(li)});target.innerHTML=ul.innerHTML}},initSubscribe:function(){if(wp_pb&&
wp_pb.StaticMethods&&!wp_pb.StaticMethods.isSubscriber())$(".pb-mostread-subscribe").show()},init:function(){this.initABTest();this.initSubscribe()}};var lifecycle={init:function(){feature.init()}};if(wp_pb.StaticMethods.isPageHydrated())lifecycle.init();window.__e.push(["shamble",function(){lifecycle.init()}])})(jQuery);
(function($,TWP){var applyStickiness=function(){var $window=$(window),$ad=$(".pb-f-ad-flex-3"),$nextStory=$(".pb-f-article-next-story"),$bottomContent=$("#bottom-content"),$rightRail=$("#right-rail"),slotId="slug_flex_ss_bb_hp_3",stopLimit=0,$prevSibling=$ad.prev();if(!$rightRail.length&&$prevSibling.children().length)$rightRail=$prevSibling;$(document).on("async-features-loaded",function(){$prevSibling=$ad.prev()});$ad.on("DOMNodeInserted",function(e){var $el=$(e.target),id=$el.attr("id");if($el.is("iframe")&&
id&&!/(hidden)/g.test(id)){$ad.off("DOMNodeInserted");afterAdInserted($el)}});var bindScrollDown=function(){var original_top=$ad.offset().top,scrollTop,ad_left=$rightRail.offset().left,adWidth=$rightRail.width(),min_left=618;var getStopPoint=function(){var leaderboardAdTop=$bottomContent.length?$bottomContent.offset().top:$(document).height();var featureTop=$nextStory.is(":visible")?$nextStory.offset().top:leaderboardAdTop;return featureTop-$ad.height()-50}();var getTopPoint=function(){if($prevSibling.length)return $prevSibling.offset().top+
$prevSibling.height();else return original_top};var applySticky=function(scrollTop){var stopPoint=getStopPoint;stopLimit=stopLimit?stopLimit:stopPoint+$ad.height()+50;if(scrollTop>stopPoint){if($ad.hasClass("sticky")){$ad.removeClass("sticky");var topPoint=stopPoint-$ad.height()/2;$ad.css({top:topPoint,left:0,position:"absolute"})}}else if(scrollTop<stopPoint+$ad.height()+50)if(!$ad.hasClass("sticky")&&ad_left>min_left){$ad.css({top:50,left:ad_left,width:adWidth,position:"initial"});$ad.addClass("sticky")}};
var removeSticky=function(){if($ad.hasClass("sticky")){$ad.attr("style","");$ad.removeClass("sticky")}};$window.off("scroll.flexAd3-sticky").on("scroll.flexAd3-sticky",function(){scrollTop=$window.scrollTop();if(scrollTop>getTopPoint())applySticky(scrollTop);else removeSticky()});$window.off("resize.flexAd3-sticky").on("resize.flexAd3-sticky",function(){ad_left=$rightRail.offset().left;if($ad.is(":visible")&&$ad.hasClass("sticky"))if(ad_left>min_left)$ad.css({left:ad_left});else removeSticky()});
$ad.on("flexAd3.remove_sticky",function(){$window.off("scroll.flexAd3-sticky");$window.off("resize.flexAd3-sticky");removeSticky()})};function startSticky(){if(!TWP.Features.Ad.flexAd3.sticky)return;if($ad.is(":visible"))bindScrollDown();else $window.on("resize.flexAd3-invisible",function(){if($ad.is(":visible"))bindScrollDown();else $ad.trigger("flexAd3.remove_sticky")})}var afterAdInserted=function(){if(window.googletag&&window.googletag.pubadsReady)window.googletag.pubads().addEventListener("slotRenderEnded",
function(event){if(event.slot.getSlotElementId()===slotId)startSticky()})}};if(TWP.Features.Ad.flexAd3&&TWP.Features.Ad.flexAd3.sticky)applyStickiness()})(jQuery,TWP);
(function($){TWP=window.TWP||{};TWP.PostTV=TWP.PostTV||{};TWP.PostTV.StickyPlayer=TWP.PostTV.StickyPlayer||{};window.stickyEngagedTimeStamp=null;var $rootFixed=TWP.PostTV.StickyPlayer.$rootFixed;var playerOutId;var mobileMode=window.isMobile&&window.isMobile.any()||window.location.href.indexOf("forceMobileMode")>-1;function animateTo($anchor,opts){var options=opts||{};options.fixed=options.fixed||false;options.zIndex=options.zIndex||1;options.shadow=options.shadow||false;options.speed=options.speed||
400;options.cb=options.cb||null;var relativeTofixed=function($anchor,cb){var $fixed=$rootFixed,fixedOffset=$fixed.offset(),fixedWidth=$fixed.width(),anchorOffset=$anchor.offset(),anchorWidth=$anchor.width(),scrollTop=$(window).scrollTop();$fixed.css({position:"fixed",top:fixedOffset.top-scrollTop,left:fixedOffset.left,width:fixedWidth+"px","z-index":options.zIndex});$fixed.css({"transition-duration":options.speed/1E3+"s","transition-timing-function":"ease-in-out",width:anchorWidth+2+"px",top:anchorOffset.top-
$(window).scrollTop(),left:anchorOffset.left});if(typeof cb==="function")$fixed.one("transitionend",cb);$fixed.find(".wpv-sticky").addClass("wpv-sticky-engaged")};var fixedToRelative=function($anchor,cb){var $fixed=$rootFixed,offset=$anchor.offset(),width=$anchor.width(),scrollTop=$(window).scrollTop();var fullscreenElement=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,isFullscreen=fullscreenElement!==null;var transitionStyles={width:width,top:offset.top-
scrollTop,left:offset.left,"z-index":""};var toRelativeStyles={"transition-duration":"","transition-timing-function":"",position:"relative",top:"",left:"",width:"100%"};if(isFullscreen){$fixed.css(transitionStyles).css(toRelativeStyles);if(typeof cb==="function")cb();return}$fixed.css(transitionStyles);$fixed.one("transitionend",function(){$fixed.css(toRelativeStyles);if(typeof cb==="function")cb()});$fixed.find(".wpv-sticky").removeClass("wpv-sticky-engaged")};var animate=function($anchor,cb){if(options.fixed)relativeTofixed($anchor,
cb);else fixedToRelative($anchor,cb)};var cb=function(){if(typeof options.cb==="function")options.cb()};animate($anchor,cb)}var $root=$(".pb-f-posttv-sticky-player-powa"),$subRoot=$root.find(".posttv-sticky-player-video"),$vidWrapper=$root.find(".posttv-sticky-player-wrapper"),$textEl=$root.find(".posttv-sticky-player-text"),$caption=$root.find(".posttv-sticky-player-caption");function usePowaSticky(){TWP.PostTV.StickyPlayer.showPlayer=function(){$subRoot.removeClass("wpv-hidden")};TWP.PostTV.StickyPlayer.hidePlayer=
function(){$subRoot.addClass("wpv-hidden")};TWP.PostTV.StickyPlayer.showText=function(){$textEl.removeClass("wpv-hidden")};TWP.PostTV.StickyPlayer.hideText=function(){$textEl.addClass("wpv-hidden")};TWP.PostTV.StickyPlayer.updateBlurb=function(newBlurb){$caption.html(newBlurb)}}var adjustSize=function(){var widthRatio=.3;if(mobileMode&&window.matchMedia("(orientation: portrait)").matches)widthRatio=.6;var stickyWidth=$(window).width()*widthRatio+12;if(stickyWidth>492)stickyWidth=492;else if(stickyWidth<
156)stickyWidth=156;$root.css({width:stickyWidth});$vidWrapper.css({width:stickyWidth-12});$vidWrapper.css({height:$vidWrapper.width()*9/16})};adjustSize();function isElementInViewport(el,fract){if(typeof jQuery==="function"&&el instanceof jQuery)el=el[0];var fraction=fract||.8;var rect=el.getBoundingClientRect();var topOffsetAdjustment=0;var $navBarEl=$("#nav-bar");var $breakingNewsEl=$(".pb-f-page-breaking-news-bar");if($navBarEl.length>0)topOffsetAdjustment+=$navBarEl.height();if($breakingNewsEl.length>
0)topOffsetAdjustment+=$breakingNewsEl.height();return rect.top+el.offsetHeight*fraction>=topOffsetAdjustment&&rect.left>=0&&rect.bottom-el.offsetHeight*fraction<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)||rect.top<0&&rect.bottom>(window.innerHeight||document.documentElement.clientHeight)}function isMobileAndZoomedIn(){if(window.isMobile&&window.isMobile.any()){var ratio=document.documentElement.clientWidth/window.innerWidth;
return ratio>1}return false}function isInMobileStickyPlayerBucket(){var toReturn=false;try{var bucket=window.PoWaSettings.buckets.viewportAutoplay;toReturn=bucket["in"]("TRUE_STICKY")||bucket["in"]("FALSE_STICKY")}catch(e){}return toReturn}function getBottomIframe(){var toReturn;try{toReturn=document.getElementById("slug_fixedBottom").getElementsByTagName("iframe")[0]}catch(e){}return toReturn}function showPOEToggle(){try{$(getBottomIframe().contentWindow.document.querySelector("#poe-toggle")).show()}catch(e){}}
function hidePOEToggle(){try{$(getBottomIframe().contentWindow.document.querySelector("#poe-toggle")).hide()}catch(e){}}function goFullscreen($powaEl){var isFullScreen=!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement);var powaEl=$powaEl[0];var videoEl=$powaEl.find(".powa-video")[0];var fullscreenEl=videoEl;if($powaEl.find(".powa-live-video-controls").length>0)fullscreenEl=powaEl;if(!isFullScreen)if(fullscreenEl.requestFullscreen)fullscreenEl.requestFullscreen();
else if(fullscreenEl.mozRequestFullScreen)fullscreenEl.mozRequestFullScreen();else if(fullscreenEl.webkitRequestFullScreen)fullscreenEl.webkitRequestFullScreen();else if(fullscreenEl.msRequestFullscreen)fullscreenEl.msRequestFullscreen();else if(videoEl.webkitEnterFullScreen)videoEl.webkitEnterFullscreen()}var $players=$(".powa");var throttleInterval=5;var waitInterval=400;var lastTime=(new Date).getTime();var isOut=false;var waitTimeout;var $target=$root.find("#posttv-sticky-player-wrapper");var $stickyClose=
$root.find(".posttv-sticky-player-exit");var outTracker=false;var closeTracker=false;var WAIT=false;function safetyCheck(cb){clearTimeout(waitTimeout);waitTimeout=setTimeout(function(){WAIT=true;cb&&cb()},waitInterval)}function moveOut(id,$el){if(!outTracker)outTracker=true;window.stickyEngagedTimeStamp=Date.now();playerOutId=id;isOut=true;$root.removeClass("wpv-hidden");clearTimeout(waitTimeout);if(mobileMode)$root.addClass("bottom-60");if($target.get(0).style.display!="none")animateTo($el,{fixed:true,
zIndex:536870903,cb:function(){if(isOut)TWP.PostTV.StickyPlayer.showPlayer()}})}function moveBack($el){TWP.PostTV.StickyPlayer.hidePlayer();safetyCheck(function(){animateTo($el,{cb:function(){WAIT=false}})});$root.addClass("wpv-hidden");isOut=false}function checkPlayers(){var $el=$($players.get(0));if($el.data("aspect-ratio")<.56||$el.data("aspect-ratio")>.57)return true;var allowOnMobile=$el.attr("data-sticky-player-mobile")!=="0"&&isInMobileStickyPlayerBucket()||window.location.href.indexOf("mobileStickyPlayer")>
-1;var allowedClient=window.isMobile&&window.isMobile.any()?allowOnMobile:true;if(!allowedClient)return true;var id=$el.attr("id");var player=window.powas&&window.powas[id];var $wrap=$el.parent().hasClass("wpv-wrap")?$el.parent():$el.parent().parent().hasClass("wpv-wrap")?$el.parent().parent():null;if($wrap&&player&&!closeTracker){var video=$("#powa-player-"+$el.attr("data-uuid")).get(0);var isPlaying=!video.paused&&video.currentTime>0||player&&player.powa.getStatus().playing;if(isMobileAndZoomedIn())$stickyClose.click();
else if(isElementInViewport($wrap)&&isOut&&playerOutId===id){moveBack($wrap);if(mobileMode){player.powa.showControls();$rootFixed.find(".powa-pane").show();showPOEToggle();$rootFixed.find(".powa-video").off(".stickyPlayerFullscreen")}}else if(!isElementInViewport($wrap)&&!isOut&&isPlaying){if(mobileMode){$rootFixed.find(".powa-pane").hide();if(!window.isMobile.iOS()){player.powa.hideControls();if(player.powa.getStatus().state.startsWith("ad"))player.powa.once("play",player.powa.hideControls);var event=
window.isMobile&&window.isMobile.any()?"touchstart.stickyPlayerFullscreen":"click.stickyPlayerFullscreen";$rootFixed.find(".powa-video").on(event,function(){var playerState=player.powa.getStatus().state;if(playerState==="playing"||playerState==="paused")goFullscreen($el)})}try{getBottomIframe().contentWindow.document.querySelector(".poe-container--expanded #poe-toggle").click()}catch(e){}hidePOEToggle()}moveOut(id,$target)}}}function initEventHandlers(){$(window).scroll(throttle(function(){var time=
(new Date).getTime();if(time-lastTime>throttleInterval&&!WAIT){lastTime=time;checkPlayers()}},50));$(window).resize(wp_pb.StaticMethods.debounce(function(){adjustSize();if(isOut&&playerOutId)animateTo($target,{fixed:true,speed:10,zIndex:536870903})},100));$stickyClose.click(function(){if(!closeTracker)closeTracker=true;showPOEToggle();try{window.powas[playerOutId].powa.pause();moveBack($("#"+playerOutId).parent().parent())}catch(err){}try{var playerEl=window.powas[playerOutId].powa.element;playerEl.dispatchEvent(new CustomEvent("stickyClose",
{detail:Math.floor((Date.now()-window.stickyEngagedTimeStamp)/1E3)}))}catch(err){}})}function init(id){usePowaSticky();initEventHandlers();var $el=$("#"+id);$rootFixed=$rootFixed&&$rootFixed.length?$rootFixed:$el.parent(".wpv-fixed");if($el.data("aspect-ratio")<.56||$el.data("aspect-ratio")>.57)return;$players=$players.length?$players:$(".powa");$target=$target.length?$target:$root.find("#posttv-sticky-player-wrapper");$stickyClose=$stickyClose.length?$stickyClose:$root.find(".posttv-sticky-player-exit");
if($players[0]&&id===$players[0].id&&$el.attr("data-preroll-only")!=="1"&&$el.attr("data-sticky-player")!=="0")$el.addClass("wpv-sticky")}if(window.powas&&$players&&$players[0]&&$players[0].id&&window.powas[$players[0].id])init($players[0].id);else document.body.addEventListener("powaReady",function(event){init(event.detail.id)});$(function(){$root.addClass("wpv-hidden")});function throttle(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=
function(){previous=options.leading===false?0:Date.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=Date.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false)timeout=setTimeout(later,
remaining);return result}}})(jQuery);(function($){})(jQuery);__darwinmeta__=window.__darwinmeta__||{isFired:false};
(function(window,store){var MAX_WAIT=200;_dw=window._dw||[];_dw.push(["global","ready",function(api){if(!store.isFired){store.isFired=true;fireEvent(api)}}]);setTimeout(function(){if(!store.isFired&&"function"==typeof window._dw)_dw.push(["global","ready",function(api){store.isFired=true;fireEvent(api)}])},MAX_WAIT);function fireEvent(api){$(window.document).trigger("abtest-ready",[api])}})(window,__darwinmeta__);