(function($){var logger=window.TWP&&TWP.Tools&&TWP.Tools.logger?new TWP.Tools.logger("feature-loader"):window.console;function makeLoadFeatureFunc(baseConfig,baseOptions){baseConfig=baseConfig||{};baseOptions=baseOptions||{};return function(config,options){var conf=$.extend(baseConfig,config);var thisoptions=$.extend(baseOptions,options);wp_pb.StaticMethods.loadFeature(conf,thisoptions)}}var loaderInstances=$(".pb-f-tools-feature-loader");loaderInstances.each(function(i,el){var $el=$(el);var $config=
$(".feature-loader-config",$el);var id=$el.attr("id");if(!$config.length||!id)return;var contentUri=$config.data("contenturi");var loadFeature=makeLoadFeatureFunc({el:id},contentUri?{contentUri:contentUri}:null);var actionFuncs={loadFeature:loadFeature};var conditionsURL=$config.data("conditionsurl");if(conditionsURL){$.get(conditionsURL).then(handler).then(null,function(e){logger.error(e)});return}if($config.is("script")){var conditions;try{conditions=JSON.parse($config.html())}catch(e){logger.error(e);
return}if(conditions){handler(conditions);return}}function handler(configs){ConditionManager.makeFromConfig({configs:configs,conditionFuncs:wp_pb.conditions,actionFuncs:actionFuncs})}})})(window.jQuery);